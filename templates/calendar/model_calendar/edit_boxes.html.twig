{% extends 'admin.html.twig' %}

{% block title %}Calendrier {{ model.title }} - Gestion des cases{% endblock %}

{% block body %}
    <div class="container-fluid p-0">
        <h1 class="mb-4">{% trans %}Gestion des cases{% endtrans %}</h1>
        <hr>
        {{ form_start(form) }}
        <div class="row align-items-center">
            <div class="col-xxl-6">
                <div class="calendar-view mx-auto">
                    <h2 class="mb-3 text-center calendar-title">{% trans %}Calendrier{% endtrans %} {{ model.title }}</h2>
                    <div class="calendar-container">
                        <div id="calendar" class="calendar" style="background-image: url('{{ asset(model.path) }}')">
                            {% for modelBox in model.modelBoxes|sort((a, b) => a.position <=> b.position) %}
                                <div class="model-box" data-id="{{ modelBox.id }}" style="left: {{ modelBox.coordX }}%; top: {{ modelBox.coordY }}%;">
                                    <div class="model-box-number">
                                        {{ modelBox.position + 1 }}
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xxl-6 px-5 mt-5 mt-xxl-0">
                <div id="boxes">
                    {% form_theme form.modelBoxes
                        'calendar/model_calendar/modelBox-theme.html.twig'
                        'utils/jquery.collection.html.twig'
                    %}
                    {{ form_widget(form.modelBoxes) }}
                </div>
            </div>
        </div>

        <button class="btn btn-primary w-100 mt-4">Valider</button>
        
        {{ form_end(form) }}
    </div>

    <!-- Modal -->
    <div class="modal fade" id="previewModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered .modal-xl">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <div class="spinner-grow" role="status"></div>
                    <div class="spinner-grow" role="status"></div>
                    <div class="spinner-grow" role="status"></div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}